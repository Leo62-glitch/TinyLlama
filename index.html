<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>TinyLlama en Local</title>
</head>
<body>
    <h1>Test de TinyLlama ðŸš€</h1>
    <textarea id="prompt" rows="5" cols="60" placeholder="Ã‰cris ton prompt ici..."></textarea><br><br>
    <button onclick="handleClick()">Envoyer au LLM</button>

    <h2>RÃ©ponse :</h2>
    <pre id="response"></pre>

    <script type="module">
        import { pipeline } from 'https://cdn.jsdelivr.net/npm/@xenova/transformers@2.5.0';

        // Chargement du modÃ¨le TinyLlama
        let pipe = null;

        async function init() {
            document.getElementById('response').innerText = "Chargement du modÃ¨le, patiente un peu...";
            pipe = await pipeline('text-generation', 'Xenova/TinyLlama-1.1B-Chat-v1.0');
            document.getElementById('response').innerText = "ModÃ¨le prÃªt ! Envoie un prompt ðŸš€";
        }

        async function handleClick() {
            const prompt = document.getElementById('prompt').value;
            if (!pipe) {
                alert("Le modÃ¨le est encore en train de charger !");
                return;
            }
            const out = await pipe(prompt, {
                max_new_tokens: 200,
                temperature: 0.7,
                repetition_penalty: 1.2
            });
            document.getElementById('response').innerText = out[0].generated_text;
        }

        // DÃ©marrage
        init();
    </script>
</body>
</html>
